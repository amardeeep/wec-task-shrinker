<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/home.css" />
    <link rel="stylesheet" href="/reset.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
  </head>
  <body>
    <%if(user){%>
    <div class="greetings">
      Welcome back <%=user.userName %> <a href="logout">Logout</a>
    </div>
    <div class="shortenURL">
      <p>Generate a Short URL.</p>
      <form action="/generateLinks" method="post">
        <% if(errorsG) {%>
        <ul>
          <% for(let error of errorsG) {%>
          <li><%=error.msg %></li>
          <% } %>
        </ul>
        <% } %>
        <input
          type="text"
          name="fullURL"
          id="fullURL"
          placeholder="Full URL "
        />
        <button type="submit">Generate</button>
      </form>
      <p>Add Custom short URL.</p>
      <form action="/submitLinks" method="post">
        <div class="error">
          <% if(errorsS) {%>
          <ul>
            <% for(let error of errorsS) {%>
            <li><%=error.msg %></li>
            <% } %>
          </ul>
          <% } %> <% if(errorS) {%>
          <p><%=errorS %></p>
          <% } %>
        </div>
        <input type="text" name="fullURL" id="fullURL" placeholder="Full URL" />
        <input
          type="text"
          name="shortURL"
          id="shortURL"
          placeholder="Short URl"
        />
        <button type="submit">Submit</button>
      </form>
    </div>
    <div class="links">
      <h2>Your Saved Links</h2>
      <%if(links){ %>
      <ul class="linksul">
        <% for(let link of links){ %>
        <li>
          <div class="full linkSection">
            <div class="identifiers">Full URL</div>
            <a href="<%=link.fullURL%>"><%=link.fullURL%></a>
          </div>
          <div class="short linkSection">
            <div class="identifiers">Short URL</div>
            <a href="<%=link.shortURL%>/shortURL"><%=link.shortURL%></a>
          </div>
          <div class="clicks linkSection">
            <div class="identifiers">Visits</div>
            <%=link.clicks%>
          </div>
          <div class="delete">
            <a href="<%=link.id%>/delete">Delete</a>
          </div>
        </li>
        <% } %>
      </ul>
      <% } %>
    </div>
    <div class="footer">
      Made By <a href="https://github.com/amardeeep"> Amardeep</a>
    </div>
    <%}else{%>
    <div class="nav">
      <h1>Shrinkr</h1>
      <div class="linksHeader">
        <a href="login">Login</a> <a href="signup">Sign Up</a>
      </div>
    </div>
    <div class="homeContent">
      <p>
        A simple and efficient way to shrink and manage your favorite URLs.
        <a href="signup">Sign Up</a> Now to get started.
      </p>
      <ul>
        <li>
          Easy to use. Just paste the URL in the form and click on generate to
          randomly generate a short URL.
          <div class="img"></div>
        </li>
        <li>
          Give a name of your choosing by pasting it in the form and submit the
          form. Easy and convenient.
          <div class="img"></div>
        </li>
        <li>
          Secured using passport.js so that your data stays secure no matter
          what.
          <div class="img"></div>
        </li>
      </ul>
    </div>
    <div class="footer">
      Made By <a href="https://github.com/amardeeep"> Amardeep</a>
    </div>
    <%}%>
  </body>
</html>
